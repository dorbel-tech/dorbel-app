# This file is meant to extend docker-compose.yml for development environment
version: '2'
volumes:
  apartments-api-node_modules:
services:

  apartments-api:
    build:
      dockerfile: Dockerfile.dev  
    image: dorbel/apartments-api:development
    ports:
      - '5858:5858'
    volumes:
      - ./apartments-api:/home/nodejs/app
      - apartments-api-node_modules:/home/nodejs/app/node_modules
    environment:
      NODE_ENV: ${NODE_ENV}
    command: npm run start:dev

  front-gateway:
    build:
      dockerfile: Dockerfile.dev  
    image: dorbel/front-gateway:development
    ports:
      - '5859:5859'
      - '8888:8888'
    volumes:
      - ./front-gateway/src:/home/nodejs/app/src
    environment:
      NODE_ENV: ${NODE_ENV}
      AUTH0_DOMAIN: ${AUTH0_DOMAIN}
      AUTH0_CLIENT_ID: ${AUTH0_CLIENT_ID}
      CLOUDINARY_SECRET: ${CLOUDINARY_SECRET}
      CLOUDINARY_API_KEY: ${CLOUDINARY_API_KEY}
    command: bash -c "npm run build:dev& npm run start:dev" 
